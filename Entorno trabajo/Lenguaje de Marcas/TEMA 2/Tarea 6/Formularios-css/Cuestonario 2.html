<!doctype html>
<html lang="es">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Cuestionario Supremo Interactivo</title>
    <style>
        :root {
            --color-bg: #0a0f24;
            --color-panel: #111a3c;
            --color-accent: #f59e0b;
            --color-accent2: #14b8a6;
            --color-text: #e0e7ff;
            --color-muted: #94a3b8;
            --color-success: #10b981;
            --color-error: #ef4444;
            --radius: 14px;
            --transition: all 0.3s ease;
            --glass: rgba(255, 255, 255, 0.05);
            --shadow: 0 10px 25px rgba(0, 0, 0, 0.4);
        }

        * {
            box-sizing: border-box;
        }

        body {
            font-family: 'Poppins', sans-serif;
            margin: 0;
            background: radial-gradient(circle at 30% 20%, #0f172a, #0a0f24 90%);
            color: var(--color-text);
            min-height: 100vh;
            padding: 20px;
            overflow-x: hidden;
        }

        h1,
        h2,
        h3 {
            margin: 0;
        }

        header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 20px;
            background: var(--color-panel);
            padding: 20px;
            border-radius: var(--radius);
            box-shadow: var(--shadow);
        }

        .branding {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .branding img {
            width: 50px;
            height: 50px;
            border-radius: 12px;
        }

        .tagline {
            color: var(--color-muted);
            font-size: 0.9rem;
        }

        main {
            display: grid;
            grid-template-columns: 1fr 300px;
            gap: 20px;
        }

        @media (max-width: 900px) {
            main {
                grid-template-columns: 1fr;
            }
        }

        /* Card style */
        .card {
            background: var(--glass);
            backdrop-filter: blur(14px);
            border-radius: var(--radius);
            padding: 20px;
            box-shadow: var(--shadow);
            border: 1px solid rgba(255, 255, 255, 0.05);
            transition: var(--transition);
        }

        .card:hover {
            transform: translateY(-3px);
        }

        /* Progress */
        .progress-bar {
            width: 100%;
            height: 14px;
            border-radius: 999px;
            background: rgba(255, 255, 255, 0.1);
            overflow: hidden;
            margin-bottom: 16px;
        }

        .progress-bar>div {
            height: 100%;
            width: 0%;
            background: linear-gradient(90deg, var(--color-accent2), var(--color-accent));
            transition: width 0.4s ease;
        }

        .quiz-section {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .question {
            background: var(--color-panel);
            padding: 16px;
            border-radius: var(--radius);
            border-left: 4px solid var(--color-accent2);
        }

        .answers label {
            display: block;
            background: var(--glass);
            padding: 10px;
            border-radius: 8px;
            margin-bottom: 8px;
            cursor: pointer;
            transition: var(--transition);
            border: 1px solid transparent;
        }

        .answers label:hover {
            background: rgba(255, 255, 255, 0.08);
        }

        .answers input {
            margin-right: 8px;
            accent-color: var(--color-accent);
        }

        /* Sidebar */
        aside {
            position: sticky;
            top: 20px;
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .btn {
            background: linear-gradient(90deg, var(--color-accent), var(--color-accent2));
            border: none;
            color: white;
            font-weight: 600;
            padding: 10px 16px;
            border-radius: var(--radius);
            cursor: pointer;
            transition: var(--transition);
        }

        .btn:hover {
            filter: brightness(1.1);
        }

        .danger {
            background: var(--color-error);
        }

        .modal {
            display: none;
            position: fixed;
            inset: 0;
            align-items: center;
            justify-content: center;
            background: rgba(0, 0, 0, 0.7);
            z-index: 99;
        }

        .modal.show {
            display: flex;
        }

        .modal-content {
            background: var(--color-panel);
            padding: 24px;
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            text-align: center;
            width: min(90%, 420px);
        }

        .score-display {
            font-size: 2rem;
            font-weight: 700;
            margin: 10px 0;
        }

        footer {
            text-align: center;
            color: var(--color-muted);
            margin-top: 24px;
            font-size: 0.85rem;
        }
    </style>
</head>

<body>
    <header>
        <div class="branding">
            <img src="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='60' height='60'><rect width='60' height='60' rx='12' fill='%23f59e0b'/><text x='50%' y='55%' text-anchor='middle' font-family='sans-serif' font-size='26' fill='white'>Q</text></svg>"
                alt="logo">
            <div>
                <h1>Cuestionario Supremo Interactivo</h1>
                <div class="tagline">Incluye lógica dinámica, tiempos, y evaluación avanzada.</div>
            </div>
        </div>
    </header>

    <main>
        <div class="card">
            <div class="progress-bar">
                <div id="progress"></div>
            </div>
            <div class="quiz-section" id="quiz">
                <!-- Preguntas generadas dinámicamente -->
            </div>
        </div>

        <aside>
            <div class="card">
                <div id="status">Preguntas respondidas: 0</div>
                <button class="btn" id="submit">Enviar cuestionario</button>
                <button class="btn danger" id="reset">Reiniciar</button>
            </div>
        </aside>
    </main>

    <footer>
        Cuestionario avanzado generado dinámicamente — demuestra interactividad, temporizadores y almacenamiento local.
    </footer>

    <div class="modal" id="resultModal">
        <div class="modal-content">
            <h2>Resultado</h2>
            <div class="score-display" id="score">0 / 100</div>
            <div id="feedback"></div>
            <button class="btn" id="closeModal">Cerrar</button>
        </div>
    </div>

    <script>
        const questions = [
            { id: 1, text: '¿Qué etiqueta define un formulario en HTML?', type: 'radio', options: ['<form>', '<section>', '<input>', '<div>'], correct: '<form>', weight: 20 },
            { id: 2, text: 'Selecciona los lenguajes usados en el desarrollo web front-end', type: 'checkbox', options: ['HTML', 'CSS', 'PHP', 'JavaScript'], correct: ['HTML', 'CSS', 'JavaScript'], weight: 25 },
            { id: 3, text: 'Selecciona tu nivel de experiencia con JavaScript', type: 'range', min: 0, max: 5, weight: 10 },
            { id: 4, text: 'Empareja el elemento con su descripción', type: 'select', pairs: [{ label: '<header>', choices: ['Encabezado de documento', 'Pie de página', 'Formulario'], correct: 'Encabezado de documento' }, { label: '<footer>', choices: ['Encabezado', 'Pie de página', 'Navegación'], correct: 'Pie de página' }], weight: 15 },
            { id: 5, text: 'Escribe la palabra clave usada para declarar una constante en JavaScript', type: 'input', pattern: /^const$/i, weight: 30 }
        ];

        const quizContainer = document.getElementById('quiz');
        const progress = document.getElementById('progress');
        const status = document.getElementById('status');
        const submitBtn = document.getElementById('submit');
        const resetBtn = document.getElementById('reset');
        const modal = document.getElementById('resultModal');
        const closeModal = document.getElementById('closeModal');
        const scoreDisplay = document.getElementById('score');
        const feedback = document.getElementById('feedback');

        function createQuestion(q) {
            const div = document.createElement('div');
            div.className = 'question';
            const h3 = document.createElement('h3');
            h3.textContent = q.text;
            div.appendChild(h3);

            const answers = document.createElement('div');
            answers.className = 'answers';

            if (q.type === 'radio') {
                q.options.forEach(opt => {
                    const lbl = document.createElement('label');
                    lbl.innerHTML = `<input type="radio" name="q${q.id}" value="${opt}">${opt}`;
                    answers.appendChild(lbl);
                });
            }

            if (q.type === 'checkbox') {
                q.options.forEach(opt => {
                    const lbl = document.createElement('label');
                    lbl.innerHTML = `<input type="checkbox" name="q${q.id}" value="${opt}">${opt}`;
                    answers.appendChild(lbl);
                });
            }

            if (q.type === 'range') {
                const range = document.createElement('input');
                range.type = 'range';
                range.min = q.min;
                range.max = q.max;
                range.value = 0;
                const out = document.createElement('output');
                out.textContent = '0';
                range.addEventListener('input', () => out.textContent = range.value);
                answers.append(range);
                answers.append(out);
            }

            if (q.type === 'select') {
                q.pairs.forEach(p => {
                    const row = document.createElement('div');
                    const sel = document.createElement('select');
                    sel.name = `q${q.id}-${p.label}`;
                    sel.innerHTML = '<option value="">--Selecciona--</option>' + p.choices.map(c => `<option value="${c}">${c}</option>`).join('');
                    row.innerHTML = `<strong>${p.label}</strong> `;
                    row.append(sel);
                    answers.append(row);
                });
            }

            if (q.type === 'input') {
                const inp = document.createElement('input');
                inp.type = 'text';
                inp.name = `q${q.id}`;
                inp.placeholder = 'Escribe tu respuesta';
                answers.append(inp);
            }

            div.append(answers);
            quizContainer.append(div);
        }

        questions.forEach(createQuestion);

        function updateProgress() {
            const total = questions.length;
            let answered = 0;
            questions.forEach(q => {
                const inputs = document.querySelectorAll(`[name^='q${q.id}']`);
                inputs.forEach(inp => {
                    if ((inp.type === 'radio' || inp.type === 'checkbox') && inp.checked) answered++;
                    if (inp.tagName === 'SELECT' && inp.value) answered++;
                    if (inp.type === 'range' && inp.value != 0) answered++;
                    if (inp.type === 'text' && inp.value.trim() !== '') answered++;
                });
            });
            const pct = Math.min(100, (answered / (questions.length * 2)) * 100);
            progress.style.width = pct + '%';
            status.textContent = `Preguntas respondidas: ${answered}`;
        }

        document.addEventListener('input', updateProgress);

        function calculateScore() {
            let totalScore = 0;
            questions.forEach(q => {
                if (q.type === 'radio') {
                    const checked = document.querySelector(`input[name='q${q.id}']:checked`);
                    if (checked && checked.value === q.correct) totalScore += q.weight;
                }
                if (q.type === 'checkbox') {
                    const checked = Array.from(document.querySelectorAll(`input[name='q${q.id}']:checked`)).map(i => i.value);
                    let correctCount = checked.filter(v => q.correct.includes(v)).length;
                    totalScore += (correctCount / q.correct.length) * q.weight;
                }
                if (q.type === 'range') {
                    const val = parseInt(document.querySelector(`input[name='q${q.id}']`).value);
                    totalScore += (val / q.max) * q.weight;
                }
                if (q.type === 'select') {
                    q.pairs.forEach(p => {
                        const val = document.querySelector(`select[name='q${q.id}-${p.label}']`).value;
                        if (val === p.correct) totalScore += q.weight / q.pairs.length;
                    });
                }
                if (q.type === 'input') {
                    const val = document.querySelector(`input[name='q${q.id}']`).value.trim();
                    if (q.pattern.test(val)) totalScore += q.weight;
                }
            });
            return Math.round(totalScore);
        }

        submitBtn.addEventListener('click', () => {
            const score = calculateScore();
            scoreDisplay.textContent = `${score} / 100`;
            feedback.textContent = score >= 80 ? 'Excelente conocimiento!' : score >= 60 ? 'Buen trabajo, pero puedes mejorar' : 'Necesitas estudiar más.';
            modal.classList.add('show');
        });

        closeModal.addEventListener('click', () => modal.classList.remove('show'));
        resetBtn.addEventListener('click', () => { quizContainer.innerHTML = ''; questions.forEach(createQuestion); updateProgress(); });
    </script>
</body>

</html>